<h1><%= @track.name %></h1>
<!-- <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js"></script> -->
<link
rel="stylesheet"
href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css"
type="text/css"
/>


<div class="map-with-button">
  <div class="track-map col-8">
    <div id="map"
      style="width: 100%; height: 100%;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  </div>
</div>
  <% if @racewithuser.empty?  %>
    <div>
      <%= link_to track_races_path(@track), method: :POST, remote: true do %>
        <p class='btn btn-danger'> Join this Race</p>
      <% end %>
    </div>
  <% else %>
    <div>
      <%= link_to track_race_path(@track, @race), method: :DELETE, remote: true do %>
        <p class='btn btn-danger'> Cancel </p>
      <% end %>
    </div>
  <% end %>


<div>
  <h3 id='runners'> Runners </h3>
  <% @users.each do |user| %>
    <%= link_to user_path(user) do %>
      <% if user.photo.attached? %>
        <%= cl_image_tag user.photo.key, class:'avatar'%>
      <% else %>
        <%= image_tag "avatar-default-copy.png", crop: :fill, class:'avatar' %>
      <% end %>
    <% end %>
 <%end %>
</div>

